## 1ï¸âƒ£ Node.jsì—ì„œì˜ package.json "type" ì„¤ì •
Node.jsëŠ” íŒŒì¼ì´ ESMì¸ì§€ CJSì¸ì§€ êµ¬ë¶„ ê¸°ì¤€ì´ í•„ìš”.
â†’ package.jsonì˜ "type" í•„ë“œê°€ ë°”ë¡œ ê·¸ ê¸°ì¤€!
```json
{
  "type": "module"
}
```
- "type": "module" ì¸ ê²½ìš°
  - .js â†’ ESM ìœ¼ë¡œ í•´ì„
  - .cjs â†’ ê°•ì œ CJS
  - .mjs â†’ ê°•ì œ ESM
- ê¸°ë³¸ (ì—†ê±°ë‚˜ "type": "commonjs") ì´ë©´:
  - .js â†’ CJS
  - .mjs â†’ ESM
  - .cjs â†’ CJS
### ğŸ“Œ ìš”ì•½
| íŒŒì¼ í™•ì¥ì | `"type": "module"` ì„¤ì • ì‹œ | ê¸°ë³¸ (`type` ì—†ìŒ) |
| ------ | ----------------------- | -------------- |
| .js    | ESM                     | CJS            |
| .mjs   | ESM                     | ESM            |
| .cjs   | CJS                     | CJS            |
> â†’ íŒ¨í‚¤ì§€ ë‹¨ìœ„ë¡œ ëª¨ë“ˆ íƒ€ì…ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ!

## 2ï¸âƒ£ .js vs .mjs í™•ì¥ìì— ë”°ë¥¸ ë™ì‘
- .mjs â†’ ëª…ì‹œì  ESM (ëª…í™•í•¨, í˜¼ìš© ì‹œ ìœ ìš©)
- .js â†’ íŒ¨í‚¤ì§€ì˜ "type" ì„¤ì •ì— ë”°ë¼ ë‹¬ë¼ì§

| ìƒí™©                      | ì¶”ì²œ í™•ì¥ì                     |
| ----------------------- | -------------------------- |
| ê¸°ì¡´ CJS í”„ë¡œì íŠ¸ + ESM ì¼ë¶€ ì‚¬ìš© | `.mjs`                     |
| ìƒˆ í”„ë¡œì íŠ¸ ì „ë¶€ ESMí™”          | `.js` + `"type": "module"` |

## 3ï¸âƒ£ import() ë™ì  importì˜ í™œìš©
- ë™ì  import = ëŸ°íƒ€ì„ì—ì„œ ëª¨ë“ˆì„ ì¡°ê±´ì ìœ¼ë¡œ, ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œ
```js
const module = await import('./myModule.js');
console.log(module.default);
```
or (ë¹„ë™ê¸°)
```js
import('./myModule.js').then((module) => {
  console.log(module.default);
});
```
âœ… íŠ¹ì • ìƒí™©ì—ì„œë§Œ ë¬´ê±°ìš´ ëª¨ë“ˆ ë¡œë“œ
```js
if (userWantsFeature) {
  const { heavyFeature } = await import('./heavyFeature.js');
  heavyFeature();
}
```
âœ… SSR ì‹œ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ êµ¬ë¶„í•´ì„œ ì½”ë“œ ë¶„ê¸°
âœ… ì½”ë“œ ë¶„í•  (Code splitting)

## 4ï¸âƒ£ ESMì—ì„œì˜ __dirname, __filename ëŒ€ì•ˆ
```js
import { fileURLToPath } from 'url';
import { dirname } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

console.log(__filename);
console.log(__dirname);
```
- ë¸Œë¼ìš°ì € í™˜ê²½ê³¼ì˜ í˜¸í™˜ì„±ì„ ë§ì¶”ê¸° ìœ„í•¨
- import.meta.url ì€ ë¸Œë¼ìš°ì €ì—ì„œë„ ë™ì¼í•˜ê²Œ ì œê³µë¨